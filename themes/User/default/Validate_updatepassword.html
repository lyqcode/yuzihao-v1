<extend name="Public:base"/>


<block name="main">
<form method="post" id="myform" class="form-horizontal" action="{:U('Account/password')}">
    <div class="form-group">
        <label class="control-label col-md-2">当前密码:</label>
        <div class="col-md-6">
            <input type="password" class="form-control" name="oldpassword">
        </div>
    </div>
    <div class="form-group">
        <label class="control-label col-md-2">新密码:</label>
        <div class="col-md-6">
            <input type="password" class="form-control" name="password">
        </div>
    </div>
    <div class="form-group">
        <label class="control-label col-md-2">确认密码:</label>
        <div class="col-md-6">
            <input type="password" class="form-control" name="repassword">
        </div>
    </div>
    <div class="form-actions">
        <input type="submit" value="提交" class="btn btn-sm btn-primary">
    </div>
</form>


<script type="text/javascript">

    $("#myform").submit(function () {
        var self = $(this);
        $.post(self.attr("action"), self.serialize(), success, "json");
        return false;

        function success(data) {
            if (data.status == 1) {
                layer.msg(data.info, {
                    icon: 1,
                    time: 2000 //2秒关闭（如果不配置，默认是3秒）
                });

            } else {
                layer.msg(data.info, {
                    icon: 2,
                    time: 2000 //2秒关闭（如果不配置，默认是3秒）
                });
                $(".reloadverify").click();
            }
        }
    });

</script>
</block>