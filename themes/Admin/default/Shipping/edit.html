<html>
<head>
    <meta charset="UTF-8">
    <title>编辑</title>
    <link rel="stylesheet" href="__CSS__/elpis.min.css">
    <!-- jQuery文件。务必在bootstrap.min.js 之前引入 -->
    <script src="__JS__/jquery-1.10.2.min.js"></script>
    <script type="text/javascript" src="__JS__/jquery.form.js"></script>
</head>
<body>
<style>
    body{
        padding: 15px;
    }
</style>
<form  action="{:U('Shipping/edit')}" method="post">
    <table  class="table">
        <tr>
            <td  width="120">配送方式名称：</td>
            <td>
                <input type="text" class="input-text" name="name" value="{$vo.name}" validate="required:true,minlength:1, maxlength:40" /></td>
        </tr>
        <tr>
            <td>类型：</td>
            <td>
                <input type="checkbox" id="type" name="type" value="1" class="input_checkbox" />货到付款
            </td>
        </tr>
        <tr>
            <td>重量设置：</td>
            <td>
                <select name="first_weight" id="first_weight">
                    <option label="500克" value="500">500克</option>
                    <option label="1公斤" value="1000" selected="selected">1公斤</option>
                    <option label="1.2公斤" value="1200">1.2公斤</option>
                    <option label="2公斤" value="2000">2公斤</option>
                    <option label="5公斤" value="5000">5公斤</option>
                    <option label="10公斤" value="10000">10公斤</option>
                    <option label="20公斤" value="20000">20公斤</option>
                    <option label="50公斤" value="50000">50公斤</option>
                </select>续重单位

                <select name="second_weight" id="second_weight">
                    <option label="500克" value="500">500克</option>
                    <option label="1公斤" value="1000" selected="selected">1公斤</option>
                    <option label="1.2公斤" value="1200">1.2公斤</option>
                    <option label="2公斤" value="2000">2公斤</option>
                    <option label="5公斤" value="5000">5公斤</option>
                    <option label="10公斤" value="10000">10公斤</option>
                    <option label="20公斤" value="20000">20公斤</option>
                    <option label="50公斤" value="50000">50公斤</option>
                </select>
            </td>
        </tr>

        <tr>
            <td>保价设置：</td>
            <td>
                <input type="checkbox" id="is_insure" name="is_insure" class="input_checkbox"   value="1"/>支持物流保价
            </td>
        </tr>

        <tr id="is_insure_box">
            <td>&nbsp;</td>
            <td>
                费率 <input type="text" id="insure_fee" name="insure_fee" value="{$vo.insure_fee}" class="input-text" size="3"/>%          最低保价费<input type="text" id="insure_low_price" name="insure_low_price" value="{$vo.insure_low_price}" class="input-text" size="3"/> *该项必填且只允许填写数字金额
            </td>
        </tr>

        <tr>
            <td>配送费用：</td>
            <td>首重费用 <input type="text" id="first_price" name="first_price" class="input-text" value="{$vo.first_price}" size="3"  validate="required:true,minlength:1, maxlength:40"/>元            续重费用<input type="text" name="second_price" id="second_price" class="input-text" value="{$vo.second_price}" size="3"  validate="required:true,minlength:1, maxlength:40"/> 元  </td>
        </tr>

        <tr>
            <td>简介</td>
            <td><textarea id="description" name="description" rows="4" cols="50">{$vo.description}</textarea>
            </td>
        </tr>


        <tr>
            <td>排序</td>
            <td><input type="text" name="listorder" value="{:intval($vo[listorder])}" class="input-text" id="listorder" size="3" /></td>
        </tr>
        <tr>
            <td>状态</td>
            <td> <input name="status"  value="0" type="radio" {if !$vo[status]}checked{/if}>  {:L(disable)}&nbsp;&nbsp;&nbsp;<input name="status" value="1" type="radio"   {if $vo[status]}checked{/if}>  {:L(enable)} </td>
        </tr>
    </table>
    {if $vo[id]!=''}<input TYPE="hidden" name="id" value="{$vo.id}">{/if}

    {if $_GET['isajax']}
    <input type="hidden" name="isajax" value="1" />
    <input class="btn btn-primary" type="submit" value="提交">
    {else}
    <div class="btn">
        <input class="btn btn-primary" type="submit" value="提交">
        <input type="hidden" name="forward" value="{$_SERVER['HTTP_REFERER']}" />
        <input TYPE="reset"  value="{:L('reset')}" class="button">
    </div>
    {/if}
    <script>
        $(document).ready(function() {
            $("#is_insure").click( function () {
                if($(this).val()== 0){
                    $("#is_insure_box").hide();
                    $("#insure_fee").val('');
                    $("#insure_low_price").val('');
                } else {
                    $("#is_insure_box").show();
                }
            });
        });
    </script>
    </div>
</form>

<script>
    var index = parent.layer.getFrameIndex(window.name); //获取窗口索引

    $(document).ready(function() {
        $('#myform').ajaxForm({
            success:  complete,  // post-submit callback
            dataType: 'json'
        });
    });

    function complete(data){
        if (data.status == 1) {
            parent.layer.msg(data.info, {
                icon: 1,
                time: 5000 //2秒关闭（如果不配置，默认是3秒）
            });
            parent.location.reload();
            parent.layer.close(index);
        } else {
            layer.msg(data.info, {
                icon: 2,
                time: 2000 //2秒关闭（如果不配置，默认是3秒）
            });
        }
    }
</script>

</body>
</html>